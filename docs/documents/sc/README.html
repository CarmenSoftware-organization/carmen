<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spot Check Module Documentation - Carmen ERP Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-light);
            color: var(--text-primary);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: var(--bg-white);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            padding: 2rem 0;
        }

        .sidebar-header {
            padding: 0 1.5rem;
            margin-bottom: 2rem;
        }

        .sidebar-header h1 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .back-link:hover {
            color: var(--primary);
        }

        .sidebar nav {
            padding: 0 1rem;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section h3 {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            padding: 0 0.5rem;
            margin-bottom: 0.5rem;
        }

        .nav-section ul {
            list-style: none;
        }

        .nav-section a {
            display: block;
            padding: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .nav-section a:hover,
        .nav-section a.active {
            background: var(--bg-light);
            color: var(--primary);
        }

        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 2rem;
            max-width: calc(100% - 280px);
        }

        .breadcrumb {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .content-wrapper {
            display: flex;
            gap: 2rem;
        }

        .document-content {
            flex: 1;
            background: var(--bg-white);
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
            min-width: 0;
        }

        .toc-sidebar {
            width: 250px;
            flex-shrink: 0;
        }

        .toc-sticky {
            position: sticky;
            top: 2rem;
            background: var(--bg-white);
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
        }

        .toc-title {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .toc-list {
            list-style: none;
        }

        .toc-list a {
            display: block;
            padding: 0.25rem 0;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.2s;
        }

        .toc-list a:hover {
            color: var(--primary);
        }

        .toc-list .toc-h2 {
            margin-left: 0;
            font-weight: 500;
        }

        .toc-list .toc-h3 {
            margin-left: 1rem;
            font-size: 0.8125rem;
        }

        .toc-list .toc-h4 {
            margin-left: 2rem;
            font-size: 0.75rem;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        h2 {
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
            color: var(--text-primary);
        }

        h3 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }

        h4 {
            font-size: 1.125rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        p {
            margin-bottom: 1rem;
        }

        ul, ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        code {
            background: var(--bg-light);
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-bottom: 1rem;
        }

        pre code {
            background: transparent;
            padding: 0;
            color: inherit;
        }

        blockquote {
            border-left: 4px solid var(--primary);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--text-secondary);
            font-style: italic;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }

        th, td {
            border: 1px solid var(--border);
            padding: 0.75rem;
            text-align: left;
        }

        th {
            background: var(--bg-light);
            font-weight: 600;
        }

        a {
            color: var(--primary);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        hr {
            border: none;
            border-top: 1px solid var(--border);
            margin: 2rem 0;
        }

        img {
            max-width: 600px;
            height: auto;
            border-radius: 0.5rem;
            border: 1px solid var(--border);
            margin: 1rem 0;
            display: block;
        }

        .mermaid {
            background: var(--bg-white);
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
            display: flex;
            justify-content: center;
            border: 1px solid var(--border);
            max-width: 800px;
            overflow-x: auto;
        }

        .mermaid svg {
            max-width: 100%;
            max-height: 500px;
            height: auto;
            transform: scale(0.85);
            transform-origin: top center;
        }

        @media (max-width: 1024px) {
            .sidebar {
                display: none;
            }

            .main-content {
                margin-left: 0;
                max-width: 100%;
            }

            .toc-sidebar {
                display: none;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';

        // Initialize Mermaid with enhanced configuration
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            themeVariables: {
                primaryColor: '#2563eb',
                primaryTextColor: '#0f172a',
                primaryBorderColor: '#1e40af',
                lineColor: '#64748b',
                secondaryColor: '#10b981',
                tertiaryColor: '#f59e0b',
                background: '#ffffff',
                mainBkg: '#f8fafc',
                secondBkg: '#e2e8f0',
                border1: '#cbd5e1',
                border2: '#94a3b8'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                useMaxWidth: true,
                wrap: true
            },
            gantt: {
                useMaxWidth: true
            }
        });

        // Expose mermaid globally and signal it's ready
        window.mermaid = mermaid;
        window.mermaidReady = true;

        // Dispatch event when mermaid is ready
        window.dispatchEvent(new Event('mermaidLoaded'));
    </script>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-header">
            <a href="../index.html" class="back-link">‚Üê All Modules</a>
            <h1>Spot Check</h1>
        </div>

        <nav>
            <div class="nav-section">
                <h3>Navigation</h3>
                <ul>
                    <li><a href="../index.html">Module Overview</a></li>
                    <li><a href="../index.html#features">Features</a></li>
                </ul>
            </div>
        </nav>
    </aside>

    <div class="main-content">
        <div class="breadcrumb"><a href="../index.html">Documentation</a> / <a href="../index.html">SC</a></div>

        <div class="content-wrapper">
            <div class="document-content" id="markdown-content"></div>

            <aside class="toc-sidebar">
                <div class="toc-sticky">
                    <div class="toc-title">On This Page</div>
                    <ul class="toc-list" id="toc-list"></ul>
                </div>
            </aside>
        </div>
    </div>

    <script>
        const markdownContent = "# Spot Check Module Documentation\n\n**Carmen ERP System - Inventory Management**\n\nThis directory contains comprehensive documentation for the Spot Check module, including detailed specifications, site maps, and screenshots of all user interfaces.\n\n## üìÅ Contents\n\n### Documentation Files\n\n- **`spot-check-specification.md`** - Complete technical specification with all pages, components, and functionality\n- **`spot-check-sitemap.md`** - Visual site map showing navigation structure and user flows\n- **`README.md`** - This overview file\n\n### Screenshots\n\n- **`main-spot-check-page.png`** - Main spot check listing page (list and grid views)\n- **`spot-check-dashboard.png`** - Dashboard overview with statistics and active monitoring\n- **`new-spot-check-page.png`** - New spot check creation form interface\n- **`active-counts-page.png`** - Active/pending counts management page\n- **`completed-counts-page.png`** - Historical completed counts with search and filters\n\n## üéØ Module Overview\n\nThe Spot Check module enables random inventory verification and accuracy checking through:\n\n- **Random Item Selection**: Computer-generated selection based on configurable criteria\n- **High-Value Targeting**: Focus on expensive items for enhanced control\n- **Real-time Progress**: Live tracking during active counting sessions\n- **Dashboard Analytics**: Comprehensive monitoring and reporting\n- **Multi-user Support**: Role-based access and concurrent operations\n\n## üó∫Ô∏è Navigation Structure\n\n```\nSpot Check Module\n‚îú‚îÄ‚îÄ Main Page (/spot-check) - Entry point with list/grid views\n‚îú‚îÄ‚îÄ Dashboard (/spot-check/dashboard) - Analytics and monitoring\n‚îú‚îÄ‚îÄ New Spot Check (/spot-check/new) - Creation interface\n‚îú‚îÄ‚îÄ Active Counts (/spot-check/active) - In-progress sessions\n‚îî‚îÄ‚îÄ Completed Counts (/spot-check/completed) - Historical results\n```\n\n## üîß Technical Implementation\n\n### Key Components\n- **NewSpotCheckForm** - Form with real-time item preview\n- **CountDetailForm** - Interactive counting interface\n- **CountListItem** - List view component\n- **CountDetailCard** - Grid view component\n- **Dashboard panels** - Statistics, activities, and monitoring\n\n### Core Features\n- Form validation with Zod schemas\n- Real-time variance calculations\n- Progress persistence across sessions\n- Responsive design with mobile support\n- Mock data integration for development\n\n## üìä Data Flow\n\n1. **Creation**: User configures criteria ‚Üí System selects items ‚Üí Creates count session\n2. **Execution**: Counter enters actual counts ‚Üí System calculates variances ‚Üí Tracks progress\n3. **Completion**: Final submission ‚Üí Results stored ‚Üí Analytics updated\n\n## üé® UI Elements\n\n### Status Indicators\n- **Pending**: Blue badges for not-started sessions\n- **In Progress**: Green badges for active counting\n- **Completed**: Gray badges for finished counts\n- **Paused**: Yellow badges for temporarily suspended sessions\n\n### Interactive Elements\n- Dropdown filters (status, department, location)\n- Search functionality across all data fields\n- View toggles (list/grid) with persistent state\n- Progress bars with real-time updates\n\n## üîç Key Features Documented\n\n### Pages Analyzed\n1. **Main Spot Check Page** (`/spot-check`) - 275 lines\n2. **Dashboard** (`/dashboard`) - 282 lines\n3. **New Spot Check** (`/new`) - 632 lines with form logic\n4. **Active Counts** (`/active`) - 171 lines\n5. **Individual Count** (`/active/[id]`) - 148 lines\n6. **Completed Counts** (`/completed`) - 223 lines\n\n### Components Documented\n- **NewSpotCheckForm** (632 lines) - Complete form with validation\n- **CountDetailForm** (272 lines) - Interactive counting interface\n- **CountListItem** - List display component\n- **CountDetailCard** - Card display component\n- **SpotCheckNav** - Navigation component\n\n## üì± Responsive Design\n\nAll interfaces are fully responsive with:\n- Mobile-first design approach\n- Collapsible sidebar navigation\n- Touch-friendly interface elements\n- Optimized layouts for different screen sizes\n\n## üîó Integration Points\n\n### Mock Data Sources\n- `/lib/mockData` - User, department, and location data\n- Component-specific mock items and sessions\n- Realistic data for development and testing\n\n### Navigation Integration\n- Part of Inventory Management module\n- Consistent with Carmen ERP design system\n- Integrated with main application navigation\n\n## üìà Analytics & Reporting\n\n### Dashboard Metrics\n- **Active Counters**: Real-time user activity\n- **Items Counted**: Daily progress tracking\n- **Pending Reviews**: Approval queue management\n- **Latest Activities**: Audit trail and notifications\n\n### Variance Tracking\n- Automatic percentage calculations\n- Color-coded accuracy indicators\n- Historical trend analysis\n- Export capabilities for reporting\n\n---\n\n## üìù Development Notes\n\n### Generated From Analysis\n- **Date**: September 25, 2025\n- **Source**: Complete recursive codebase scan\n- **Method**: Live application screenshot capture\n- **Completeness**: All major pages and components documented\n\n### File Structure Analyzed\n```\napp/(main)/inventory-management/spot-check/\n‚îú‚îÄ‚îÄ page.tsx (275 lines)\n‚îú‚îÄ‚îÄ layout.tsx (11 lines)\n‚îú‚îÄ‚îÄ types.ts (15 lines)\n‚îú‚îÄ‚îÄ dashboard/page.tsx (282 lines)\n‚îú‚îÄ‚îÄ new/page.tsx (53 lines)\n‚îú‚îÄ‚îÄ active/page.tsx (171 lines)\n‚îú‚îÄ‚îÄ active/[id]/page.tsx (148 lines)\n‚îú‚îÄ‚îÄ completed/page.tsx (223 lines)\n‚îî‚îÄ‚îÄ components/ (8 components, 632 lines total)\n```\n\n---\n\n*This documentation provides complete coverage of the Spot Check module implementation as of the analysis date. Screenshots were captured from the running application to ensure accuracy of the user interface documentation.*";

        // Configure marked
        marked.setOptions({
            highlight: function(code, lang) {
                return code;
            },
            breaks: true,
            gfm: true
        });

        // Render markdown
        const contentDiv = document.getElementById('markdown-content');
        contentDiv.innerHTML = marked.parse(markdownContent);

        // Function to render Mermaid diagrams
        function renderMermaidDiagrams() {
            if (!window.mermaid) {
                console.log('Mermaid not loaded yet, waiting...');
                return;
            }

            // Find all code blocks with mermaid language
            const mermaidBlocks = contentDiv.querySelectorAll('pre code.language-mermaid, pre code[class*="mermaid"]');

            if (mermaidBlocks.length === 0) {
                console.log('No mermaid blocks found');
                return;
            }

            console.log('Found', mermaidBlocks.length, 'mermaid blocks');

            mermaidBlocks.forEach((block, index) => {
                const mermaidCode = block.textContent;
                const pre = block.parentElement;

                // Create a div for mermaid diagram
                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = mermaidCode;
                mermaidDiv.id = 'mermaid-diagram-' + index;

                // Replace the pre block with mermaid div
                pre.replaceWith(mermaidDiv);
            });

            // Run mermaid rendering
            window.mermaid.run({
                querySelector: '.mermaid'
            }).then(() => {
                console.log('Mermaid diagrams rendered successfully');
            }).catch(err => {
                console.error('Mermaid rendering error:', err);
            });
        }

        // Wait for mermaid to load before rendering
        if (window.mermaidReady) {
            renderMermaidDiagrams();
        } else {
            window.addEventListener('mermaidLoaded', renderMermaidDiagrams);
            // Fallback timeout
            setTimeout(renderMermaidDiagrams, 1000);
        }

        // Generate TOC from headings
        const tocList = document.getElementById('toc-list');
        const headings = contentDiv.querySelectorAll('h2, h3, h4');

        headings.forEach((heading, index) => {
            const id = 'heading-' + index;
            heading.id = id;

            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = '#' + id;
            a.textContent = heading.textContent;
            a.className = 'toc-' + heading.tagName.toLowerCase();

            li.appendChild(a);
            tocList.appendChild(li);
        });

        // Highlight active TOC item on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    tocList.querySelectorAll('a').forEach(a => {
                        a.style.color = a.getAttribute('href') === '#' + id ? 'var(--primary)' : 'var(--text-secondary)';
                        a.style.fontWeight = a.getAttribute('href') === '#' + id ? '600' : '400';
                    });
                }
            });
        }, { threshold: 1.0 });

        headings.forEach(heading => observer.observe(heading));
    </script>
</body>
</html>