<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature: Vendor Management System - Carmen ERP Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-light);
            color: var(--text-primary);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: var(--bg-white);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            padding: 2rem 0;
        }

        .sidebar-header {
            padding: 0 1.5rem;
            margin-bottom: 2rem;
        }

        .sidebar-header h1 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .back-link:hover {
            color: var(--primary);
        }

        .sidebar nav {
            padding: 0 1rem;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section h3 {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            padding: 0 0.5rem;
            margin-bottom: 0.5rem;
        }

        .nav-section ul {
            list-style: none;
        }

        .nav-section a {
            display: block;
            padding: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .nav-section a:hover,
        .nav-section a.active {
            background: var(--bg-light);
            color: var(--primary);
        }

        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 2rem;
            max-width: calc(100% - 280px);
        }

        .breadcrumb {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .content-wrapper {
            display: flex;
            gap: 2rem;
        }

        .document-content {
            flex: 1;
            background: var(--bg-white);
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
            min-width: 0;
        }

        .toc-sidebar {
            width: 250px;
            flex-shrink: 0;
        }

        .toc-sticky {
            position: sticky;
            top: 2rem;
            background: var(--bg-white);
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
        }

        .toc-title {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .toc-list {
            list-style: none;
        }

        .toc-list a {
            display: block;
            padding: 0.25rem 0;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.2s;
        }

        .toc-list a:hover {
            color: var(--primary);
        }

        .toc-list .toc-h2 {
            margin-left: 0;
            font-weight: 500;
        }

        .toc-list .toc-h3 {
            margin-left: 1rem;
            font-size: 0.8125rem;
        }

        .toc-list .toc-h4 {
            margin-left: 2rem;
            font-size: 0.75rem;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        h2 {
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
            color: var(--text-primary);
        }

        h3 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }

        h4 {
            font-size: 1.125rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        p {
            margin-bottom: 1rem;
        }

        ul, ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        code {
            background: var(--bg-light);
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-bottom: 1rem;
        }

        pre code {
            background: transparent;
            padding: 0;
            color: inherit;
        }

        blockquote {
            border-left: 4px solid var(--primary);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--text-secondary);
            font-style: italic;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }

        th, td {
            border: 1px solid var(--border);
            padding: 0.75rem;
            text-align: left;
        }

        th {
            background: var(--bg-light);
            font-weight: 600;
        }

        a {
            color: var(--primary);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        hr {
            border: none;
            border-top: 1px solid var(--border);
            margin: 2rem 0;
        }

        img {
            max-width: 600px;
            height: auto;
            border-radius: 0.5rem;
            border: 1px solid var(--border);
            margin: 1rem 0;
            display: block;
        }

        .mermaid {
            background: var(--bg-white);
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
            display: flex;
            justify-content: center;
            border: 1px solid var(--border);
            max-width: 800px;
            overflow-x: auto;
        }

        .mermaid svg {
            max-width: 100%;
            max-height: 500px;
            height: auto;
            transform: scale(0.85);
            transform-origin: top center;
        }

        @media (max-width: 1024px) {
            .sidebar {
                display: none;
            }

            .main-content {
                margin-left: 0;
                max-width: 100%;
            }

            .toc-sidebar {
                display: none;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';

        // Initialize Mermaid with enhanced configuration
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            themeVariables: {
                primaryColor: '#2563eb',
                primaryTextColor: '#0f172a',
                primaryBorderColor: '#1e40af',
                lineColor: '#64748b',
                secondaryColor: '#10b981',
                tertiaryColor: '#f59e0b',
                background: '#ffffff',
                mainBkg: '#f8fafc',
                secondBkg: '#e2e8f0',
                border1: '#cbd5e1',
                border2: '#94a3b8'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                useMaxWidth: true,
                wrap: true
            },
            gantt: {
                useMaxWidth: true
            }
        });

        // Expose mermaid globally and signal it's ready
        window.mermaid = mermaid;
        window.mermaidReady = true;

        // Dispatch event when mermaid is ready
        window.dispatchEvent(new Event('mermaidLoaded'));
    </script>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-header">
            <a href="../index.html" class="back-link">‚Üê All Modules</a>
            <h1>SR</h1>
        </div>

        <nav>
            <div class="nav-section">
                <h3>Navigation</h3>
                <ul>
                    <li><a href="../index.html">Module Overview</a></li>
                    <li><a href="../index.html#features">Features</a></li>
                </ul>
            </div>
        </nav>
    </aside>

    <div class="main-content">
        <div class="breadcrumb"><a href="../index.html">Documentation</a> / <a href="../index.html">SR</a></div>

        <div class="content-wrapper">
            <div class="document-content" id="markdown-content"></div>

            <aside class="toc-sidebar">
                <div class="toc-sticky">
                    <div class="toc-title">On This Page</div>
                    <ul class="toc-list" id="toc-list"></ul>
                </div>
            </aside>
        </div>
    </div>

    <script>
        const markdownContent = "# Feature: Vendor Management System\n\n## Description\nThe Carmen ERP Vendor Management System provides comprehensive vendor lifecycle management including vendor directory management, pricelist management, template-based pricing requests, campaign management, and vendor portal integration. The system features advanced vendor profiling with tax configuration, certification tracking, performance metrics, contact management, and address management. The vendor management module integrates with procurement processes to provide vendor comparison capabilities, pricing intelligence, and vendor performance analytics throughout the procurement workflow.\n\n## Process Flow (Step by Step)\n\n### Vendor Directory Management\n1. User navigates to `/vendor-management/manage-vendors` to access vendor directory\n2. System displays vendor list with filtering by status, business type, search functionality\n3. User can create new vendor via \"Add Vendor\" button or edit existing vendors\n4. New vendor creation includes: Basic Info, Addresses, Contacts, Tax Configuration, Certifications\n5. System validates vendor information and checks for duplicates\n6. Vendor profile creation includes performance metrics initialization and rating setup\n7. Tax configuration supports multiple profiles: VAT, GST, Sales Tax, None VAT, Custom Rate\n8. Vendor status can be toggled between Active/Inactive with immediate effect on procurement\n9. System provides vendor deletion with dependency checking for existing POs/PRs\n\n### Vendor Detail Management\n10. Vendor detail page provides tabbed interface: Overview, Price Lists, Contacts & Addresses, Certifications\n11. Overview tab displays vendor rating, performance metrics, tax configuration, and basic information\n12. Contacts & Addresses tab supports multiple addresses and contact persons with role assignments\n13. Certifications tab manages compliance documents and certification expiry tracking\n14. Price Lists tab shows all active pricelists associated with the vendor\n\n### Pricelist Management\n15. User navigates to `/vendor-management/pricelists` for pricelist overview\n16. System displays all pricelists with vendor association, status, and campaign tracking\n17. Pricelist creation supports manual entry or template-based generation\n18. Product-vendor pricing relationships are managed with validity periods and quantity breaks\n19. System supports multiple currencies with automatic conversion rates\n20. Bulk pricing updates are supported through Excel import/export functionality\n\n### Campaign Management (RFP/RFQ Process)\n21. User creates pricing campaign via `/vendor-management/campaigns/new`\n22. Campaign wizard allows vendor selection, product specification, and timeline setup\n23. System generates pricelist templates customized for each selected vendor\n24. Email templates are automatically generated and sent to vendor contacts\n25. Vendor responses are tracked with automated reminders for pending submissions\n26. Campaign analytics provide response rates, pricing comparisons, and vendor performance\n\n### Vendor Portal Integration\n27. Vendors access simplified interface via `/vendor-management/vendor-portal/sample`\n28. Portal allows vendors to update pricing, view assigned campaigns, and manage profile\n29. System provides secure authentication and role-based access for vendor users\n30. Vendor submissions integrate back into main system with approval workflows\n\n## Flow Diagram (Mermaid)\n```mermaid\nflowchart TD\n    A[Access Vendor Management] --> B[Vendor Directory]\n    B --> C{Action Required?}\n    C -->|Create New| D[New Vendor Form]\n    C -->|Edit Existing| E[Vendor Detail Page]\n    C -->|View Lists| F[Vendor Lists View]\n\n    D --> G[Basic Information Entry]\n    G --> H[Address & Contact Setup]\n    H --> I[Tax Configuration]\n    I --> J[Certification Upload]\n    J --> K[Save Vendor Profile]\n\n    E --> L[Tabbed Detail View]\n    L --> M[Overview Tab]\n    L --> N[Price Lists Tab]\n    L --> O[Contacts Tab]\n    L --> P[Certifications Tab]\n\n    B --> Q[Pricing Campaign Creation]\n    Q --> R[Select Vendors]\n    R --> S[Define Products/Requirements]\n    S --> T[Generate Templates]\n    T --> U[Send to Vendors]\n    U --> V[Track Responses]\n    V --> W[Compare Pricing]\n    W --> X[Award/Negotiate]\n\n    F --> Y[Pricelist Management]\n    Y --> Z[Create/Edit Pricelists]\n    Z --> AA[Product-Vendor Associations]\n    AA --> BB[Pricing Updates]\n    BB --> CC[Validity Management]\n\n    K --> DD[Integration with Procurement]\n    CC --> DD\n    X --> DD\n    DD --> EE[Vendor Selection in PR/PO]\n```\n\n## Screen Capture Locations\n- Capture: Vendor directory with status filters and search functionality\n- Capture: New vendor creation form showing all tabs (Basic Info, Address, Tax Config, Certifications)\n- Capture: Vendor detail page with performance rating and summary information\n- Capture: Tax configuration section showing different tax profiles and rates\n- Capture: Pricelist management page with vendor associations and status indicators\n- Capture: Campaign creation wizard with vendor selection and product requirements\n- Capture: Vendor portal simple interface for price entry\n- Capture: Vendor comparison modal during procurement process\n- Capture: Bulk pricelist upload/download functionality\n\n## Schema Entities (Plain Text)\nVendor: Core vendor entity with id, name, status, businessType, contactEmail, contactPhone, address, taxId, taxProfile, taxRate, companyRegistration, certifications, performanceMetrics, and metadata.\nVendorAddress: Physical addresses with street, city, state, postalCode, country, and addressType (primary, billing, shipping).\nVendorContact: Contact persons with name, email, phone, role, and isPrimary flag for vendor communication.\nVendorPricelist: Pricing associations with vendorId, productId, price, currency, validFrom, validTo, minimumQuantity, and campaignId.\nPricingCampaign: RFP/RFQ campaigns with campaignId, name, description, vendors, products, startDate, endDate, status, and responses.\nVendorCertification: Compliance documents with certificationType, issueDate, expiryDate, certificationBody, and documentReference.\nPerformanceMetrics: Vendor performance tracking with qualityScore, deliveryScore, priceCompetitiveness, responseTime, and overallRating.\n\n## Major Vendor Management Features\n\n### Vendor Directory\n- **Search & Filtering**: Advanced search by name, business type, status, location\n- **Status Management**: Active/Inactive toggles with immediate procurement impact\n- **Performance Ratings**: 5-star rating system with quality and delivery metrics\n- **Bulk Operations**: Mass status updates and data export functionality\n- **Vendor Validation**: Duplicate checking and data quality validation\n\n### Vendor Profiling\n- **Basic Information**: Company details, business type, registration numbers\n- **Tax Configuration**: Multi-jurisdiction tax setup with profile templates\n- **Address Management**: Multiple addresses with type classification\n- **Contact Management**: Multiple contacts with role-based assignments\n- **Certification Tracking**: Document management with expiry monitoring\n\n### Pricing & Procurement Integration\n- **Pricelist Management**: Product-vendor price associations with validity periods\n- **Campaign Management**: RFP/RFQ process automation with vendor notifications\n- **Template System**: Customizable Excel templates for pricing submissions\n- **Vendor Comparison**: Side-by-side pricing and performance comparison\n- **Integration**: Seamless connection with Purchase Request and Purchase Order processes\n\n### Vendor Portal\n- **Simple Interface**: Streamlined vendor access for pricing updates\n- **Campaign Response**: Direct response to pricing campaigns and RFPs\n- **Profile Management**: Vendor self-service for contact and certification updates\n- **Document Upload**: Secure document submission for certifications and proposals\n\n### Analytics & Reporting\n- **Performance Dashboards**: Vendor performance metrics and trends\n- **Price Analysis**: Historical pricing trends and market comparisons\n- **Response Analytics**: Campaign response rates and vendor engagement\n- **Compliance Monitoring**: Certification expiry alerts and compliance status\n\n## Ambiguities & Assumptions\nAssumption: Tax configuration supports multiple jurisdictions with automatic rate application based on vendor location and tax profile.\nAssumption: Vendor performance metrics are calculated automatically based on procurement history and delivery performance.\nAmbiguity: The exact criteria and weighting for vendor performance ratings are not explicitly defined in the system.\nAssumption: Campaign emails are automatically generated and sent to vendor contacts based on predefined templates.\nAmbiguity: Integration between vendor portal submissions and main system approval workflows requires clarification.\nAssumption: Pricelist validity periods are enforced automatically during procurement processes.\nAssumption: Multiple currencies are supported with real-time exchange rate conversion for pricing comparisons.\nAmbiguity: The specific business rules for vendor deletion and dependency checking need detailed specification.";

        // Configure marked
        marked.setOptions({
            highlight: function(code, lang) {
                return code;
            },
            breaks: true,
            gfm: true
        });

        // Render markdown
        const contentDiv = document.getElementById('markdown-content');
        contentDiv.innerHTML = marked.parse(markdownContent);

        // Function to render Mermaid diagrams
        function renderMermaidDiagrams() {
            if (!window.mermaid) {
                console.log('Mermaid not loaded yet, waiting...');
                return;
            }

            // Find all code blocks with mermaid language
            const mermaidBlocks = contentDiv.querySelectorAll('pre code.language-mermaid, pre code[class*="mermaid"]');

            if (mermaidBlocks.length === 0) {
                console.log('No mermaid blocks found');
                return;
            }

            console.log('Found', mermaidBlocks.length, 'mermaid blocks');

            mermaidBlocks.forEach((block, index) => {
                const mermaidCode = block.textContent;
                const pre = block.parentElement;

                // Create a div for mermaid diagram
                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = mermaidCode;
                mermaidDiv.id = 'mermaid-diagram-' + index;

                // Replace the pre block with mermaid div
                pre.replaceWith(mermaidDiv);
            });

            // Run mermaid rendering
            window.mermaid.run({
                querySelector: '.mermaid'
            }).then(() => {
                console.log('Mermaid diagrams rendered successfully');
            }).catch(err => {
                console.error('Mermaid rendering error:', err);
            });
        }

        // Wait for mermaid to load before rendering
        if (window.mermaidReady) {
            renderMermaidDiagrams();
        } else {
            window.addEventListener('mermaidLoaded', renderMermaidDiagrams);
            // Fallback timeout
            setTimeout(renderMermaidDiagrams, 1000);
        }

        // Generate TOC from headings
        const tocList = document.getElementById('toc-list');
        const headings = contentDiv.querySelectorAll('h2, h3, h4');

        headings.forEach((heading, index) => {
            const id = 'heading-' + index;
            heading.id = id;

            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = '#' + id;
            a.textContent = heading.textContent;
            a.className = 'toc-' + heading.tagName.toLowerCase();

            li.appendChild(a);
            tocList.appendChild(li);
        });

        // Highlight active TOC item on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    tocList.querySelectorAll('a').forEach(a => {
                        a.style.color = a.getAttribute('href') === '#' + id ? 'var(--primary)' : 'var(--text-secondary)';
                        a.style.fontWeight = a.getAttribute('href') === '#' + id ? '600' : '400';
                    });
                }
            });
        }, { threshold: 1.0 });

        headings.forEach(heading => observer.observe(heading));
    </script>
</body>
</html>