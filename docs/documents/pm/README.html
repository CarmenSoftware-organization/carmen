<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Management Module Documentation - Carmen ERP Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-light);
            color: var(--text-primary);
            line-height: 1.6;
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: var(--bg-white);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            padding: 2rem 0;
        }

        .sidebar-header {
            padding: 0 1.5rem;
            margin-bottom: 2rem;
        }

        .sidebar-header h1 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .back-link:hover {
            color: var(--primary);
        }

        .sidebar nav {
            padding: 0 1rem;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section h3 {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            padding: 0 0.5rem;
            margin-bottom: 0.5rem;
        }

        .nav-section ul {
            list-style: none;
        }

        .nav-section a {
            display: block;
            padding: 0.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .nav-section a:hover,
        .nav-section a.active {
            background: var(--bg-light);
            color: var(--primary);
        }

        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 2rem;
            max-width: calc(100% - 280px);
        }

        .breadcrumb {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .content-wrapper {
            display: flex;
            gap: 2rem;
        }

        .document-content {
            flex: 1;
            background: var(--bg-white);
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
            min-width: 0;
        }

        .toc-sidebar {
            width: 250px;
            flex-shrink: 0;
        }

        .toc-sticky {
            position: sticky;
            top: 2rem;
            background: var(--bg-white);
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
        }

        .toc-title {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .toc-list {
            list-style: none;
        }

        .toc-list a {
            display: block;
            padding: 0.25rem 0;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.2s;
        }

        .toc-list a:hover {
            color: var(--primary);
        }

        .toc-list .toc-h2 {
            margin-left: 0;
            font-weight: 500;
        }

        .toc-list .toc-h3 {
            margin-left: 1rem;
            font-size: 0.8125rem;
        }

        .toc-list .toc-h4 {
            margin-left: 2rem;
            font-size: 0.75rem;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        h2 {
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
            color: var(--text-primary);
        }

        h3 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }

        h4 {
            font-size: 1.125rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        p {
            margin-bottom: 1rem;
        }

        ul, ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        code {
            background: var(--bg-light);
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
        }

        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-bottom: 1rem;
        }

        pre code {
            background: transparent;
            padding: 0;
            color: inherit;
        }

        blockquote {
            border-left: 4px solid var(--primary);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--text-secondary);
            font-style: italic;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }

        th, td {
            border: 1px solid var(--border);
            padding: 0.75rem;
            text-align: left;
        }

        th {
            background: var(--bg-light);
            font-weight: 600;
        }

        a {
            color: var(--primary);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        hr {
            border: none;
            border-top: 1px solid var(--border);
            margin: 2rem 0;
        }

        img {
            max-width: 600px;
            height: auto;
            border-radius: 0.5rem;
            border: 1px solid var(--border);
            margin: 1rem 0;
            display: block;
        }

        .mermaid {
            background: var(--bg-white);
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
            display: flex;
            justify-content: center;
            border: 1px solid var(--border);
            max-width: 800px;
            overflow-x: auto;
        }

        .mermaid svg {
            max-width: 100%;
            max-height: 500px;
            height: auto;
            transform: scale(0.85);
            transform-origin: top center;
        }

        @media (max-width: 1024px) {
            .sidebar {
                display: none;
            }

            .main-content {
                margin-left: 0;
                max-width: 100%;
            }

            .toc-sidebar {
                display: none;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';

        // Initialize Mermaid with enhanced configuration
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            themeVariables: {
                primaryColor: '#2563eb',
                primaryTextColor: '#0f172a',
                primaryBorderColor: '#1e40af',
                lineColor: '#64748b',
                secondaryColor: '#10b981',
                tertiaryColor: '#f59e0b',
                background: '#ffffff',
                mainBkg: '#f8fafc',
                secondBkg: '#e2e8f0',
                border1: '#cbd5e1',
                border2: '#94a3b8'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                useMaxWidth: true,
                wrap: true
            },
            gantt: {
                useMaxWidth: true
            }
        });

        // Expose mermaid globally and signal it's ready
        window.mermaid = mermaid;
        window.mermaidReady = true;

        // Dispatch event when mermaid is ready
        window.dispatchEvent(new Event('mermaidLoaded'));
    </script>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-header">
            <a href="../index.html" class="back-link">‚Üê All Modules</a>
            <h1>Product Management</h1>
        </div>

        <nav>
            <div class="nav-section">
                <h3>Navigation</h3>
                <ul>
                    <li><a href="../index.html">Module Overview</a></li>
                    <li><a href="../index.html#features">Features</a></li>
                </ul>
            </div>
        </nav>
    </aside>

    <div class="main-content">
        <div class="breadcrumb"><a href="../index.html">Documentation</a> / <a href="../index.html">PM</a></div>

        <div class="content-wrapper">
            <div class="document-content" id="markdown-content"></div>

            <aside class="toc-sidebar">
                <div class="toc-sticky">
                    <div class="toc-title">On This Page</div>
                    <ul class="toc-list" id="toc-list"></ul>
                </div>
            </aside>
        </div>
    </div>

    <script>
        const markdownContent = "# Product Management Module Documentation\n\nThis directory contains comprehensive documentation for the Product Management module of the Carmen ERP system.\n\n## Documentation Structure\n\n### üìä Sitemap and Architecture\n- **[product-management-sitemap.md](./product-management-sitemap.md)** - Complete Mermaid sitemap showing module structure, navigation flow, workflow state diagrams, and user interaction patterns\n\n### üìã Detailed Specifications\n- **[product-management-specification.md](./product-management-specification.md)** - Comprehensive specification document covering all UI elements, workflows, actions, and technical implementation details\n\n### üì∏ System Screenshots\n\nAll screenshots are captured at full page resolution showing the current application state.\n\n#### Product Dashboard\n![Product Dashboard](./screenshots/product-dashboard.png)\n*The Product Management dashboard provides a simple entry point to the product management system. This placeholder interface is prepared for future enhancement with draggable analytics widgets, product performance metrics, and quick action buttons for common product operations.*\n\n#### Products List\n![Products List](./screenshots/products-list.png)\n*The Products list interface displays 8 diverse products in a comprehensive table view: Organic Jasmine Rice (PRD-001, 35.5 THB), Palm Sugar (PRD-002, 45 THB), Fish Sauce Premium Grade (PRD-003, 65 THB), Dell UltraSharp Monitor (ELEC-002, 499.99 USD), Standing Desk (OFF-002, 699.99 USD, Inactive), Wireless Mouse (TECH-001, 79.99 USD), Filing Cabinet (STAT-002, 199.99 USD), and Mechanical Keyboard (TECH-002, 149.99 USD, Inactive). Each product shows detailed categorization through Category ‚Üí Subcategory ‚Üí Item Group hierarchy, inventory unit, base price, and status. The interface provides search functionality, advanced filters (Saved Filters, Add Filter), Import/Export/Report capabilities, Add Product button, and dual view modes (table/card) for flexible product catalog management.*\n\n#### Categories Tree\n![Categories Tree](./screenshots/categories-tree.png)\n*The Product Categories tree interface displays hierarchical category management with a summary showing 2 Categories, 2 Subcategories, 3 Item Groups, and 225 Total Items. The tree structure includes: Raw Materials (Category, 150 items) containing Coffee Beans (Subcategory, 45 items) with Arabica (Item Group, 25 items) and Robusta (Item Group, 20 items) sub-groups, and Packaging (Category, 75 items) containing Cups (Subcategory, 30 items) with Paper Cups (Item Group, 15 items). The interface features search functionality, Add Category buttons at multiple levels, expandable/collapsible tree nodes, and Edit/Delete/Add actions for comprehensive three-level category hierarchy management with drag-and-drop reorganization support.*\n\n#### Units List\n![Units List](./screenshots/units-list.png)\n*The Unit Management interface displays 12 units across three distinct contexts: INVENTORY units (KG - Kilogram, G - Gram, L - Liter, ML - Milliliter), ORDER units (BOX - Box, CTN - Carton, PLT - Pallet marked Inactive, BG - Bag, CASE - Case), and RECIPE units (TSP - Teaspoon, TBSP - Tablespoon, CUP - Cup). The interface provides search functionality, filters for All Status and All Types, dual view modes (table/card toggle), Export and Add Unit buttons, and detailed columns (Code, Name, Type, Status, Description, Actions) for managing the flexible multi-context unit system used across inventory, ordering, and recipe management.*\n\n#### Legacy Screenshots (Previous Captures)\n\nAdditional screenshots showing enhanced interface details:\n- **[product-list.png](./product-list.png)** - Products list with dual view modes and comprehensive filtering\n- **[advanced-filter.png](./advanced-filter.png)** - Advanced filter builder with saved filters and JSON view\n- **[category-tree.png](./category-tree.png)** - Hierarchical category management with drag-and-drop functionality\n- **[unit-list.png](./unit-list.png)** - Unit management interface with type-based filtering\n- **[product-management-dashboard.png](./product-management-dashboard.png)** - Main dashboard placeholder\n\n## Module Overview\n\nThe Product Management module manages:\n- **Product Dashboard**: Placeholder for future draggable widget system with analytics\n- **Product Catalog**: Comprehensive product listings with advanced search and filtering\n- **Category Management**: Hierarchical three-level category tree with drag-and-drop\n- **Unit Management**: Flexible unit system for inventory, orders, and recipes\n- **Advanced Filtering**: Complex filter builder with saved configurations\n- **Bulk Operations**: Multi-product operations and management\n\n## Key Features Documented\n\n### üéõÔ∏è Product Dashboard\n- Placeholder implementation ready for future enhancement\n- Prepared for React Beautiful DnD integration\n- Analytics widgets planned (6 widgets total)\n- Quick navigation to major product functions\n\n### üì¶ Product Management\n- Comprehensive product catalog with 960+ lines of functionality\n- Dual view modes: table and card layouts\n- Advanced search with real-time filtering\n- Mock data for 8 detailed products with full nutritional profiles\n- Bulk operations: activate, deactivate, category updates, export\n- Status management with visual indicators\n\n### üîç Advanced Filter System\n- Dynamic filter builder with 539 lines of logic\n- Multiple field types: text, numeric, boolean, date, array\n- Logical operators (AND/OR) for complex conditions\n- Saved filter configurations with LocalStorage persistence\n- JSON view for filter inspection and editing\n- Filter sharing and import/export capabilities\n\n### üìÅ Category Management\n- Three-level hierarchy: Category ‚Üí Subcategory ‚Üí Item Group\n- React DnD integration for drag-and-drop restructuring (802 lines)\n- Real-time search with auto-expand and highlighting\n- Mobile-optimized with touch gestures and haptic feedback\n- Context menus with role-based actions\n- Visual tree representation with item counts\n\n### ‚öñÔ∏è Unit Management\n- Flexible unit system for different contexts (inventory/order/recipe)\n- Table and card view toggles\n- Type-based and status-based filtering\n- Usage tracking and conversion management\n- Unit relationships and conversion factors\n\n## Technical Architecture\n\n### Component Structure\n```\nproduct-management/\n‚îú‚îÄ‚îÄ page.tsx                     # Main dashboard (16 lines, placeholder)\n‚îú‚îÄ‚îÄ products/\n‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                 # Products wrapper\n‚îÇ   ‚îî‚îÄ‚îÄ components/\n‚îÇ       ‚îú‚îÄ‚îÄ product-list.tsx     # Core listing (960 lines)\n‚îÇ       ‚îî‚îÄ‚îÄ advanced-filter.tsx  # Filter system (539 lines)\n‚îú‚îÄ‚îÄ categories/\n‚îÇ   ‚îî‚îÄ‚îÄ components/\n‚îÇ       ‚îî‚îÄ‚îÄ category-list.tsx    # Tree management (802 lines)\n‚îî‚îÄ‚îÄ units/\n    ‚îî‚îÄ‚îÄ components/\n        ‚îî‚îÄ‚îÄ unit-list-improved.tsx # Unit management\n```\n\n### Key Technologies\n- **Next.js 14** with App Router\n- **TypeScript** with strict mode\n- **React Beautiful DnD** for drag-and-drop (prepared)\n- **React DnD** with HTML5Backend for category tree\n- **Recharts** for data visualization (prepared)\n- **Tailwind CSS** + **Shadcn/ui** for styling\n- **Zod** for validation schemas\n- **Mock Data System** for development and testing\n\n## Data Flow Patterns\n\n### Product Lifecycle\nBrowse ‚Üí Search/Filter ‚Üí View Details ‚Üí Edit ‚Üí Save ‚Üí Update List\n\n### Category Management\nLoad Tree ‚Üí Search/Navigate ‚Üí Drag & Drop ‚Üí Validate ‚Üí Update Structure\n\n### Filter Workflow\nBasic Filters ‚Üí Advanced Builder ‚Üí Add Conditions ‚Üí Apply Logic ‚Üí Save/Load ‚Üí Execute\n\n## Navigation Hierarchy\n\n```\nProduct Management\n‚îú‚îÄ‚îÄ Dashboard (Placeholder for Future Widgets)\n‚îú‚îÄ‚îÄ Products\n‚îÇ   ‚îú‚îÄ‚îÄ Product List (Table/Card Views)\n‚îÇ   ‚îú‚îÄ‚îÄ Advanced Filters (Builder Interface)\n‚îÇ   ‚îî‚îÄ‚îÄ Product Detail (Future Implementation)\n‚îú‚îÄ‚îÄ Categories\n‚îÇ   ‚îú‚îÄ‚îÄ Category Tree (Drag & Drop)\n‚îÇ   ‚îú‚îÄ‚îÄ Search & Navigation\n‚îÇ   ‚îî‚îÄ‚îÄ Context Actions\n‚îî‚îÄ‚îÄ Units\n    ‚îú‚îÄ‚îÄ Unit List (Type Filtering)\n    ‚îú‚îÄ‚îÄ Unit Detail (Future Implementation)\n    ‚îî‚îÄ‚îÄ Conversion Management\n```\n\n## File Sizes and Complexity\n\n| Component | File Size | Lines | Screenshot Size | Complexity |\n|-----------|-----------|-------|-----------------|------------|\n| Dashboard | Small | 16 | 62KB | Low (Placeholder) |\n| Product List | **Large** | **960** | 224KB | **Very High** |\n| Advanced Filter | **Large** | **539** | 225KB | **Very High** |\n| Category Tree | **Large** | **802** | 98KB | **Very High** |\n| Unit Management | Medium | ~200 | 156KB | Medium |\n\n## Usage Instructions\n\n1. **For Developers**: Start with the sitemap to understand the overall structure, then review the detailed specification for implementation details\n2. **For Product Managers**: Focus on the specification document for feature details, user workflows, and business logic\n3. **For UI/UX Designers**: Use the screenshots alongside the specification to understand current implementation and design patterns\n4. **For QA Teams**: The specification provides comprehensive test scenarios, expected behaviors, and workflow validations\n\n## Development Status\n\n### Implemented Features\n- ‚úÖ Product listing with dual view modes\n- ‚úÖ Advanced filter builder with saved configurations\n- ‚úÖ Hierarchical category tree with drag-and-drop\n- ‚úÖ Unit management with type-based filtering\n- ‚úÖ Mock data system for development\n- ‚úÖ Responsive design and mobile optimizations\n\n### Planned Features\n- üîÑ Dashboard widget system with analytics\n- üîÑ Product detail pages with comprehensive forms\n- üîÑ Image management and gallery\n- üîÑ Bulk import/export functionality\n- üîÑ Real-time data integration\n- üîÑ Advanced search with Elasticsearch\n- üîÑ Approval workflows for product changes\n\n## Last Updated\nGenerated: September 25, 2024\nSource Code Analysis: Complete recursive scan of product management module\nScreenshots: Full-page captures of all major interfaces\nDocumentation Status: ‚úÖ Complete\n\n---\n\nThis documentation provides a complete analysis of the Product Management module based on recursive source code scanning and live application capture. All screenshots and specifications reflect the current state of the application as of the generation date.";

        // Configure marked
        marked.setOptions({
            highlight: function(code, lang) {
                return code;
            },
            breaks: true,
            gfm: true
        });

        // Render markdown
        const contentDiv = document.getElementById('markdown-content');
        contentDiv.innerHTML = marked.parse(markdownContent);

        // Function to render Mermaid diagrams
        function renderMermaidDiagrams() {
            if (!window.mermaid) {
                console.log('Mermaid not loaded yet, waiting...');
                return;
            }

            // Find all code blocks with mermaid language
            const mermaidBlocks = contentDiv.querySelectorAll('pre code.language-mermaid, pre code[class*="mermaid"]');

            if (mermaidBlocks.length === 0) {
                console.log('No mermaid blocks found');
                return;
            }

            console.log('Found', mermaidBlocks.length, 'mermaid blocks');

            mermaidBlocks.forEach((block, index) => {
                const mermaidCode = block.textContent;
                const pre = block.parentElement;

                // Create a div for mermaid diagram
                const mermaidDiv = document.createElement('div');
                mermaidDiv.className = 'mermaid';
                mermaidDiv.textContent = mermaidCode;
                mermaidDiv.id = 'mermaid-diagram-' + index;

                // Replace the pre block with mermaid div
                pre.replaceWith(mermaidDiv);
            });

            // Run mermaid rendering
            window.mermaid.run({
                querySelector: '.mermaid'
            }).then(() => {
                console.log('Mermaid diagrams rendered successfully');
            }).catch(err => {
                console.error('Mermaid rendering error:', err);
            });
        }

        // Wait for mermaid to load before rendering
        if (window.mermaidReady) {
            renderMermaidDiagrams();
        } else {
            window.addEventListener('mermaidLoaded', renderMermaidDiagrams);
            // Fallback timeout
            setTimeout(renderMermaidDiagrams, 1000);
        }

        // Generate TOC from headings
        const tocList = document.getElementById('toc-list');
        const headings = contentDiv.querySelectorAll('h2, h3, h4');

        headings.forEach((heading, index) => {
            const id = 'heading-' + index;
            heading.id = id;

            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = '#' + id;
            a.textContent = heading.textContent;
            a.className = 'toc-' + heading.tagName.toLowerCase();

            li.appendChild(a);
            tocList.appendChild(li);
        });

        // Highlight active TOC item on scroll
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const id = entry.target.id;
                    tocList.querySelectorAll('a').forEach(a => {
                        a.style.color = a.getAttribute('href') === '#' + id ? 'var(--primary)' : 'var(--text-secondary)';
                        a.style.fontWeight = a.getAttribute('href') === '#' + id ? '600' : '400';
                    });
                }
            });
        }, { threshold: 1.0 });

        headings.forEach(heading => observer.observe(heading));
    </script>
</body>
</html>