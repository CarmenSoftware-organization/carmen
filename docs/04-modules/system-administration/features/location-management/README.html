<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Management - Carmen ERP Documentation</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/marked-mermaid@latest/dist/css/marked-mermaid.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked@latest/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-light);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--primary);
            color: white;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .breadcrumb {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .back-link {
            display: inline-block;
            color: var(--primary);
            text-decoration: none;
            margin-bottom: 1rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .content {
            background: var(--bg-white);
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        h2 {
            font-size: 1.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
            color: var(--text-primary);
        }

        h3 {
            font-size: 1.25rem;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
        }

        h4 {
            font-size: 1.125rem;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        p {
            margin-bottom: 1rem;
        }

        a {
            color: var(--primary);
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        code {
            background: var(--bg-light);
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-size: 0.875em;
            font-family: 'Monaco', 'Courier New', monospace;
        }

        pre {
            background: var(--text-primary);
            color: #f8fafc;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }

        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin: 0.5rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid var(--border);
        }

        th {
            background: var(--bg-light);
            font-weight: 600;
        }

        blockquote {
            border-left: 4px solid var(--primary);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--text-secondary);
        }

        img {
            max-width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .mermaid {
            margin: 1.5rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="section-badge">Application Modules</div>
        <div class="breadcrumb"><a href="../../index.html">Documentation</a> / <a href="../index.html">Application Modules</a> / System Administration / Features</div>
        <a href="../../index.html" class="back-link">← Back to Documentation Home</a>
        <div class="content" id="markdown-content"></div>
    </div>
    <script>
        const markdownContent = "# Location Management\n\n> **Feature:** System Administration > Location Management\n> **Pages:** 4\n> **Status:** ✅ Production Ready\n\n---\n\n## Overview\n\nLocation Management provides centralized control over all physical business locations in the Carmen ERP system. This feature enables organizations to define, configure, and maintain locations including warehouses, restaurants, central kitchens, delivery points, and end-of-period (EOP) locations.\n\n### Key Features\n\n1. **Location CRUD** - Create, view, edit, and delete locations\n2. **Dual View Modes** - Toggle between table and card views\n3. **Advanced Filtering** - Filter by status, type, and search\n4. **Hierarchical Organization** - Support for location hierarchies\n5. **Configuration Management** - Manage location-specific settings\n6. **Status Tracking** - Active/inactive status management\n\n---\n\n## Page Structure\n\n### 1. Location List Page\n**Route:** `/system-administration/location-management`\n\n#### Features:\n- **Search Bar**: Search by name, code, or type\n- **Quick Filters**:\n  - Status (All, Active, Inactive)\n  - Type (All, Warehouse, Restaurant, Kitchen, etc.)\n- **View Toggle**: Switch between table and card views\n- **Create Button**: Add new location\n- **Print Button**: Generate location reports\n\n#### Table View Columns:\n- Code\n- Name\n- Type\n- EOP (End of Period)\n- Delivery Point\n- Status (badge)\n- Actions (View, Edit, Delete)\n\n#### Card View:\n- Location name and code\n- Status badge\n- Type and EOP information\n- Delivery point\n- Quick action buttons\n\n### 2. Create Location Page\n**Route:** `/system-administration/location-management/new`\n\n#### Form Sections:\n\n**Basic Information**\n- Location Code (required, unique)\n- Location Name (required)\n- Location Type (dropdown: Warehouse, Restaurant, Central Kitchen, Store, Delivery Point)\n- Status (Active/Inactive toggle)\n\n**Address Details**\n- Address Line 1\n- Address Line 2\n- City\n- State/Province\n- Postal Code\n- Country\n\n**Configuration**\n- Is EOP Location (End of Period)\n- Is Delivery Point\n- Parent Location (for hierarchical structure)\n- Default Department\n- Timezone\n\n**Contact Information**\n- Phone Number\n- Email\n- Manager Name\n- Emergency Contact\n\n**Advanced Settings**\n- Allow Inventory\n- Allow Transfers\n- Allow Purchases\n- Allow Production\n- Cost Center Code\n- Tax Identifier\n\n### 3. View Location Page\n**Route:** `/system-administration/location-management/[id]/view`\n\n#### Sections:\n\n**Location Header**\n- Location name and code\n- Status badge\n- Edit button\n\n**Details Cards**\n- Basic Information\n- Address\n- Contact Details\n- Configuration Settings\n\n**Statistics**\n- Active Users\n- Inventory Items\n- Pending Transfers\n- Monthly Transactions\n\n**Recent Activity**\n- Recent inventory movements\n- Recent transfers\n- Recent purchases\n- Recent production\n\n### 4. Edit Location Page\n**Route:** `/system-administration/location-management/[id]/edit`\n\nSame form as Create Location, pre-populated with existing data.\n\n---\n\n## Data Model\n\n```typescript\ninterface Location {\n  // Identity\n  id: string;\n  code: string;\n  name: string;\n  type: LocationType;\n\n  // Address\n  address: {\n    line1: string;\n    line2?: string;\n    city: string;\n    state: string;\n    postalCode: string;\n    country: string;\n  };\n\n  // Configuration\n  isEOP: boolean; // End of Period location\n  isDeliveryPoint: boolean;\n  parentLocationId?: string;\n  defaultDepartment?: string;\n  timezone: string;\n\n  // Contact\n  phone?: string;\n  email?: string;\n  manager?: string;\n  emergencyContact?: string;\n\n  // Permissions\n  allowInventory: boolean;\n  allowTransfers: boolean;\n  allowPurchases: boolean;\n  allowProduction: boolean;\n\n  // Financial\n  costCenter?: string;\n  taxId?: string;\n\n  // Status\n  isActive: boolean;\n\n  // Audit\n  createdBy: string;\n  createdAt: Date;\n  updatedBy: string;\n  updatedAt: Date;\n}\n\nenum LocationType {\n  WAREHOUSE = 'Warehouse',\n  RESTAURANT = 'Restaurant',\n  CENTRAL_KITCHEN = 'Central Kitchen',\n  STORE = 'Store',\n  DELIVERY_POINT = 'Delivery Point',\n  OFFICE = 'Office',\n  FRANCHISE = 'Franchise'\n}\n```\n\n---\n\n## API Endpoints\n\n```http\nGET /api/locations\nPOST /api/locations\nGET /api/locations/:id\nPUT /api/locations/:id\nDELETE /api/locations/:id\nGET /api/locations/:id/statistics\nGET /api/locations/:id/activity\n```\n\n---\n\n## Business Rules\n\n1. **Unique Code**: Location codes must be unique within organization\n2. **Active Location Required**: At least one active location required\n3. **Hierarchy Validation**: Parent location must exist and be active\n4. **Circular Prevention**: Cannot create circular parent-child relationships\n5. **Deletion Rules**: Cannot delete location with active inventory or pending transactions\n\n---\n\n## User Guide\n\n### Creating a Location\n\n1. Navigate to Location Management\n2. Click \"Create Location\"\n3. Fill required fields (code, name, type)\n4. Add address details\n5. Configure settings\n6. Save location\n\n### Editing a Location\n\n1. Find location in list\n2. Click Edit button\n3. Modify fields as needed\n4. Save changes\n\n---\n\n**Last Updated:** 2025-01-17\n**Version:** 1.0.0\n";

        // Initialize mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default'
        });

        // Configure marked
        marked.setOptions({
            highlight: function(code, lang) {
                return code;
            },
            breaks: true,
            gfm: true
        });

        // Render markdown
        document.getElementById('markdown-content').innerHTML = marked.parse(markdownContent);

        // Render mermaid diagrams
        mermaid.contentLoaded();
    </script>
</body>
</html>