# Inventory Adjustment Module - Overview

**Document Status:** Draft  
**Last Updated:** March 27, 2024

## Table of Contents

1. [Introduction](#1-introduction)
2. [Key Features](#2-key-features)
3. [User Roles and Responsibilities](#3-user-roles-and-responsibilities)
4. [Module Structure](#4-module-structure)
5. [Technical Implementation](#5-technical-implementation)
6. [Related Documentation](#6-related-documentation)

## 1. Introduction

The Inventory Adjustment module is a critical component of the Carmen F&B Management System that enables authorized users to make controlled corrections to inventory quantities and values. This module ensures accurate inventory records through proper documentation and financial integration.

Inventory adjustments are necessary for various reasons including physical count variances, damaged goods, expired items, and system corrections. The module supports both positive (IN) and negative (OUT) adjustments with comprehensive tracking of reasons, costs, and documentation.

## 2. Key Features

### 2.1 Adjustment Management

- **Adjustment Types**: Support for both positive (IN) and negative (OUT) adjustments
- **Reason Codes**: Standardized reason codes for tracking adjustment causes
- **Lot Tracking**: Detailed lot-level adjustments for lot-tracked items
- **Cost Impact Calculation**: Automatic calculation of cost impact for all adjustments
- **Supporting Documentation**: Attachment capabilities for supporting evidence

### 2.2 Financial Integration

- **Automatic Journal Entries**: Generation of financial entries for each adjustment
- **Cost Center Allocation**: Assignment of costs to appropriate cost centers
- **Account Mapping**: Configurable mapping of adjustment types to GL accounts
- **Period Control**: Validation against accounting period status
- **Financial Reporting**: Integration with financial reporting systems

### 2.3 Reporting and Analysis

- **Adjustment History**: Comprehensive history of all adjustments
- **Variance Analysis**: Tools for analyzing adjustment patterns and variances
- **Cost Impact Reports**: Reports on financial impact of adjustments
- **Audit Reports**: Detailed audit trails for compliance purposes
- **User Activity Reports**: Tracking of user actions within the module

## 3. User Roles and Responsibilities

### 3.1 Inventory Manager

- Overall responsibility for inventory accuracy
- Review of adjustment patterns and trends
- Implementation of process improvements
- Management of reason codes and adjustment types

### 3.2 Warehouse Staff

- Identification of inventory discrepancies
- Initiation of adjustment requests
- Documentation of adjustment reasons
- Attachment of supporting evidence
- Execution of adjustments

### 3.3 Finance Team

- Review of cost impact for adjustments
- Verification of account allocations
- Reconciliation of inventory and financial records
- Period-end review of adjustment activity
- Financial reporting on inventory adjustments

### 3.4 Department Managers

- Review of department-specific adjustment patterns
- Implementation of corrective actions
- Budget management for inventory variances
- Performance monitoring related to inventory accuracy

### 3.5 System Administrator

- Management of user access rights
- Setup of reason codes and adjustment types
- Configuration of integration points
- System maintenance and updates

## 4. Module Structure

### 4.1 Main Components

#### 4.1.1 Adjustment List View

The Adjustment List View provides a comprehensive overview of all inventory adjustments with filtering, sorting, and search capabilities. Key features include:

- Status indicators for different adjustment states
- Quick filters for common adjustment types
- Advanced filtering for detailed searches
- Batch actions for processing multiple adjustments
- Export capabilities for reporting purposes

#### 4.1.2 Adjustment Detail View

The Adjustment Detail View displays comprehensive information about a specific adjustment, including:

- Header information (reference, date, type, status)
- Item details with quantity and cost information
- Lot tracking details for applicable items
- Journal entries generated by the adjustment
- Stock movement records
- Comments and attachments
- Activity log

#### 4.1.3 Adjustment Creation Flow

The Adjustment Creation Flow guides users through the process of creating a new inventory adjustment:

1. Selection of adjustment type (IN/OUT)
2. Selection of location and department
3. Selection of reason code
4. Addition of items with quantities and costs
5. Lot selection for lot-tracked items
6. Document attachment
7. Review and submission

### 4.2 Navigation Structure

- **Main Navigation**: Inventory Management > Inventory Adjustments
- **Secondary Navigation**:
  - Adjustment List
  - Create New Adjustment
  - Reports and Analysis

### 4.3 Integration Points

- **Inventory Module**: Real-time updates to inventory quantities and values
- **Financial Module**: Generation of journal entries for financial impact
- **Notification System**: Alerts for status changes
- **Reporting System**: Data for inventory and financial reports
- **User Management**: Access control and permissions
- **Audit System**: Tracking of all user actions

## 5. Technical Implementation

### 5.1 Architecture

The Inventory Adjustment module is implemented using a modern, component-based architecture:

- **Frontend**: React components with Tailwind CSS and Shadcn UI
- **Backend**: Next.js API routes and server actions
- **Database**: Prisma ORM with PostgreSQL
- **State Management**: React Context API and server-side state
- **Authentication**: Next-Auth integration with role-based access control

### 5.2 Key Components

- **InventoryAdjustmentList**: Main list view component
- **InventoryAdjustmentDetail**: Detail view component
- **AdjustmentForm**: Form component for creating/editing adjustments
- **ItemSelectionGrid**: Component for selecting and managing adjustment items
- **LotSelectionDialog**: Dialog for selecting lots for adjustment
- **JournalEntryViewer**: Component for viewing generated journal entries
- **StockMovementViewer**: Component for viewing stock movement records

### 5.3 Data Models

The module uses the following primary data models:

- **InventoryAdjustment**: Main adjustment record
- **AdjustmentItem**: Items included in the adjustment
- **AdjustmentLot**: Lot-level details for adjustment items
- **AdjustmentJournal**: Journal entries generated by adjustments
- **StockMovement**: Stock movement records created by adjustments

### 5.4 API Endpoints

The module exposes RESTful API endpoints for:

- Retrieving adjustment lists with filtering and pagination
- Creating, updating, and deleting adjustments
- Generating reports and analytics
- Managing reference data (reason codes, locations, etc.)

## 6. Related Documentation

- [INV-ADJ-Business-Requirements](./INV-ADJ-Business-Requirements.md)
- [INV-ADJ-PRD](./INV-ADJ-PRD.md)
- [INV-ADJ-Component-Structure](./INV-ADJ-Component-Structure.md)
- [INV-ADJ-Page-Flow](./INV-ADJ-Page-Flow.md)
- [INV-ADJ-API-Endpoints-Overview](./INV-ADJ-API-Endpoints-Overview.md)
- [INV-ADJ-API-Endpoints-Core](./INV-ADJ-API-Endpoints-Core.md)
- [INV-ADJ-User-Flow-Diagram](./INV-ADJ-User-Flow-Diagram.md)
- [INV-ADJ-Business-Logic](./INV-ADJ-Business-Logic.md) 