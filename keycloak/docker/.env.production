# Keycloak Production Environment Configuration
# WARNING: Change all passwords and secrets before deployment!

# Database Configuration
KC_DB_PASSWORD=your-secure-database-password-here
KC_DB_POOL_INITIAL_SIZE=5
KC_DB_POOL_MIN_SIZE=5
KC_DB_POOL_MAX_SIZE=20

# Keycloak Admin Configuration
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=your-secure-admin-password-here

# Domain Configuration
KC_HOSTNAME=auth.carmen-erp.com
KC_FRONTEND_URL=https://auth.carmen-erp.com

# SSL/TLS Configuration
KC_HTTPS_CERTIFICATE_FILE=/opt/keycloak/conf/server.crt
KC_HTTPS_CERTIFICATE_KEY_FILE=/opt/keycloak/conf/server.key

# Performance Configuration
KC_HTTP_POOL_MAX_THREADS=200
KC_DATASOURCE_POOL_SIZE=25
KC_TRANSACTION_XA_ENABLED=false

# Security Configuration
KC_SPI_TRUSTSTORE_FILE_FILE=/opt/keycloak/conf/truststore.jks
KC_SPI_TRUSTSTORE_FILE_PASSWORD=your-truststore-password

# Redis Configuration (for session clustering)
REDIS_PASSWORD=your-secure-redis-password

# Monitoring Configuration
KC_METRICS_ENABLED=true
KC_HEALTH_ENABLED=true

# SMTP Configuration (for email verification)
KC_SPI_EMAIL_TEMPLATE_PROVIDER=freemarker
KC_SPI_EMAIL_TEMPLATE_FREEMARKER_ENABLED=true
SMTP_HOST=smtp.carmen-erp.com
SMTP_PORT=587
SMTP_USERNAME=noreply@carmen-erp.com
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=noreply@carmen-erp.com
SMTP_FROM_DISPLAY_NAME=Carmen ERP
SMTP_REPLY_TO=support@carmen-erp.com
SMTP_REPLY_TO_DISPLAY_NAME=Carmen ERP Support
SMTP_AUTH=true
SMTP_STARTTLS=true
SMTP_SSL=false

# Backup Configuration
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_S3_BUCKET=carmen-erp-backups
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1

# Logging Configuration
KC_LOG_LEVEL=INFO
KC_LOG_TARGET=file
KC_LOG_FILE=/var/log/keycloak/keycloak.log
KC_LOG_FORMAT=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c] (%t) %s%e%n

# Rate Limiting Configuration
KC_SPI_RATE_LIMITING_ENABLED=true
KC_SPI_RATE_LIMITING_REQUESTS_PER_MINUTE=100

# Session Configuration
KC_SPI_STICKY_SESSION_ENCODER=infinispan
KC_CACHE_CONFIG_FILE=/opt/keycloak/conf/cache-ispn.xml

# Theme Configuration
KC_SPI_THEME_STATIC_MAX_AGE=31536000
KC_SPI_THEME_CACHE_THEMES=true
KC_SPI_THEME_CACHE_TEMPLATES=true

# JVM Configuration
JAVA_OPTS_APPEND="-Xms1024m -Xmx2048m -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djava.awt.headless=true"